(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38d92a0e"],{"8f51":function(t,e,s){},9930:function(t,e,s){"use strict";var a=s("8f51"),r=s.n(a);r.a},fc55:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{position:"relative"}},[s("div",{staticClass:"container mb-5"},[t.hide?s("div",[t._m(0),s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-lg-11"},[s("div",{staticClass:"row justify-content-center"},[t.hide?s("div",{staticClass:"col-lg-4 d-xl-block d-none"},[s("div",{staticClass:"order-im p-4"},[s("h5",{staticClass:"title"},[t._v("商品資訊")]),s("div",{staticClass:"mb-3"},[s("span",{staticClass:"font-title"},[t._v("已選購商品 :")]),s("br"),s("div",{attrs:{id:"table"}},[s("table",{staticClass:"table"},[t._m(1),s("tbody",t._l(t.data.carts,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button",disabled:t.isdisabled===e.id},on:{click:function(s){return t.removeCart(e.id)}}},[s("i",{staticClass:"far fa-trash-alt"})])]),s("td",{staticClass:"align-middle"},[t._v("\n                            "+t._s(e.product.title)+"\n                            "),e.coupon?s("div",{staticClass:"text-success"},[t._v("\n                              已套用優惠券\n                            ")]):t._e()]),s("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+t._s(e.product.unit))]),s("td",{staticClass:"align-middle text-right"},[t._v(t._s(e.final_total))])])}),0),s("tfoot",[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),s("td",{staticClass:"text-right"},[t._v(t._s(t.data.total))])]),t.data.final_total!==t.data.total?s("tr",[s("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),s("td",{staticClass:"text-right text-success"},[t._v(t._s(t.data.final_total))])]):t._e()])])]),s("div",{staticClass:"input-group mb-3 input-group-sm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupons,expression:"coupons"}],staticClass:"form-control p-2",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupons},on:{input:function(e){e.target.composing||(t.coupons=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-Lorange",attrs:{type:"button"},on:{click:function(e){return t.UseCoupons()}}},[t._v("\n                          套用優惠碼\n                        ")])])])])])]):t._e(),s("div",{staticClass:"col-lg-8 p-lg-5 pay"},[s("CostomForm")],1)])])])]):s("div",{staticClass:"text-center h3 d-flex align-items-center justify-content-center",staticStyle:{height:"500px"}},[s("div",{staticClass:"d-flex align-items-center flex-column"},[s("span",[t._v("沒有選購任何商品"+t._s(t.time)+"秒後跳回商品頁...")]),s("span",[t._v("\n          沒有回應時請點\n          "),s("router-link",{attrs:{to:"/products"}},[t._v("商品頁")])],1)])])]),t.hide?s("div",{staticClass:"m-pos"},[s("div",{staticClass:"d-xl-none d-block m-order px-3 py-4",staticStyle:{position:"relative"}},[s("div",{staticClass:"order-im"},[s("div",{staticClass:"mb-3"},[s("span",{staticClass:"font-title"},[t._v("商品名稱 :")]),s("br"),s("div",{attrs:{id:"table"}},[s("table",{staticClass:"table"},[t._m(2),s("tbody",t._l(t.data.carts,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"align-middle m-padding"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button",disabled:t.isdisabled===e.id},on:{click:function(s){return t.removeCart(e.id)}}},[s("i",{staticClass:"far fa-trash-alt"})])]),s("td",{staticClass:"align-middle m-padding"},[t._v("\n                          "+t._s(e.product.title)+"\n                          "),e.coupon?s("div",{staticClass:"text-success"},[t._v("\n                            已套用優惠券\n                          ")]):t._e()]),s("td",{staticClass:"align-middle m-padding"},[t._v(t._s(e.qty)+t._s(e.product.unit))]),s("td",{staticClass:"align-middle m-padding text-right"},[t._v(t._s(e.final_total))])])}),0),s("tfoot",[s("tr",[s("td",{staticClass:"text-right m-padding",attrs:{colspan:"3"}},[t._v("總計")]),s("td",{staticClass:"text-right m-padding"},[t._v(t._s(t.data.total))])]),t.data.final_total!==t.data.total?s("tr",[s("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),s("td",{staticClass:"text-right text-success"},[t._v(t._s(t.data.final_total))])]):t._e()])])]),s("div",{staticClass:"input-group mb-3 input-group-sm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupons,expression:"coupons"}],staticClass:"form-control p-2",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupons},on:{input:function(e){e.target.composing||(t.coupons=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-Lorange",attrs:{type:"button"},on:{click:function(e){return t.UseCoupons()}}},[t._v("\n                      套用優惠碼\n                    ")])])])])]),s("a",{staticClass:"order-btn",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.ordershow()}}},[t._v("商品資訊")])])]):t._e()])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"mt-3"},[s("div",{staticClass:"container mb-3"},[s("h1",{staticClass:"text-center"},[t._v("結帳頁")]),s("div",{staticClass:"form-row text-center d-lg-flex d-none"},[s("div",{staticClass:"col-sm col-12"},[s("div",{staticClass:"alert alert-primary alert-border",attrs:{role:"alert"}},[t._v("\n                1.輸入訂單資料\n              ")])]),s("div",{staticClass:"col-sm col-12"},[s("div",{staticClass:"alert alert-light alert-border",attrs:{role:"alert"}},[t._v("\n                2.金流付款\n              ")])]),s("div",{staticClass:"col-sm col-12"},[s("div",{staticClass:"alert alert-light alert-border",attrs:{role:"alert"}},[t._v("\n                3.完成\n              ")])])]),s("div",{staticClass:"d-flex box-out text-center d-lg-none"},[s("div",{staticClass:"item d-flex flex-column align-items-center"},[s("div",{staticClass:"box box-conduct"},[t._v("\n                1\n              ")]),s("span",[t._v("輸入訂單資料")])]),s("div",{staticClass:"item d-flex flex-column align-items-center"},[s("div",{staticClass:"box"},[t._v("\n                2\n              ")]),s("span",[t._v("金流付款")])]),s("div",{staticClass:"item d-flex flex-column align-items-center"},[s("div",{staticClass:"box"},[t._v("\n                3\n              ")]),s("span",[t._v("完成")])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("th"),s("th",[t._v("品名")]),s("th",[t._v("數量")]),s("th",[t._v("單價")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("th",{staticClass:"m-padding"}),s("th",{staticClass:"m-padding"},[t._v("品名")]),s("th",{staticClass:"m-padding"},[t._v("數量")]),s("th",{staticClass:"m-padding"},[t._v("單價")])])}],i=(s("8e6e"),s("ac6a"),s("456d"),s("a481"),s("bd86")),n=s("1157"),o=s.n(n),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("form",{staticClass:"my-4",on:{submit:function(e){return e.preventDefault(),t.submitPage()}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"useremail"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?s("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?s("span",{staticClass:"text-danger"},[t._v("輸入姓名不得為空")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("phone")},attrs:{type:"tel",id:"usertel",name:"phone",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("phone")?s("span",{staticClass:"text-danger"},[t._v("收件人電話不得為空")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?s("span",{staticClass:"text-danger"},[t._v("收件人地址不得留空")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"comment"}},[t._v("留言")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._m(0)])])},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-danger"},[t._v("送出訂單")])])}],d={data:function(){return{form:{user:{}}}},methods:{submitPage:function(){var t=this;this.$store.dispatch("updateLoading",!0),this.$store.dispatch("Mcart/getCart").then(function(){if(!0===t.$store.state.Mcart.hide){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("yang","/order");t.$validator.validate().then(function(s){if(s){var a={data:t.form};t.$http.post(e,a).then(function(e){e.data.success&&t.$router.replace("/checkout/".concat(e.data.orderId,"/paytype"))})}t.$store.dispatch("updateLoading",!1)})}})}}},u=d,m=s("2877"),p=Object(m["a"])(u,l,c,!1,null,null,null),v=p.exports,f=s("2f62");function h(t,e){var s=Object.keys(t);return Object.getOwnPropertySymbols&&s.push.apply(s,Object.getOwnPropertySymbols(t)),e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s}function g(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?h(s,!0).forEach(function(e){Object(i["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var C={components:{CostomForm:v},data:function(){return{coupons:"",timeSender:null,hide:!0,time:3}},watch:{hide:function(){this.timeout()}},created:function(){this.getCart()},beforeDestroy:function(){clearInterval(this.timeSender)},computed:g({},Object(f["c"])("Mcart",["data","isdisabled"])),methods:{getCart:function(){var t=this;this.$store.dispatch("Mcart/getCart").then(function(){t.hide=t.$store.state.Mcart.hide})},timeout:function(){var t=this;this.time=3;var e=setInterval(function(){0===t.time&&t.$router.replace("/products"),t.time-=1},1e3);this.timeSender=e},removeCart:function(t){var e=this;this.$store.dispatch("Mcart/removeCart",t).then(function(){e.getCart()})},UseCoupons:function(){var t=this;this.$store.dispatch("updateLoading",!0);var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("yang","/coupon"),s={data:{code:this.coupons}};this.$http.post(e,s).then(function(e){t.getCart(),t.$store.dispatch("updateLoading",!1)})},ordershow:function(){o()(".m-pos").toggleClass("m-pos-show")}}},_=C,b=(s("9930"),Object(m["a"])(_,a,r,!1,null,null,null));e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-38d92a0e.7219839b.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38d92a0e"],{"8f51":function(t,a,e){},9930:function(t,a,e){"use strict";var s=e("8f51"),i=e.n(s);i.a},fc55:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticStyle:{position:"relative"}},[e("div",{staticClass:"container mb-5"},[t.hide?e("div",[t._m(0),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-lg-11"},[e("div",{staticClass:"row justify-content-center"},[t.hide?e("div",{staticClass:"col-lg-4 d-xl-block d-none"},[e("div",{staticClass:"order-im p-4"},[e("h5",{staticClass:"title"},[t._v("商品資訊")]),e("div",[e("span",{staticClass:"font-title"},[t._v("已選購商品 :")]),e("br"),e("div",{attrs:{id:"table"}},[e("table",{staticClass:"table"},[t._m(1),e("tbody",t._l(t.data.carts,function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button",disabled:t.isdisabled===a.id},on:{click:function(e){return t.removeCart(a.id)}}},[e("i",{staticClass:"far fa-trash-alt"})])]),e("td",{staticClass:"align-middle"},[t._v("\n                            "+t._s(a.product.title)+"\n                            "),a.coupon?e("div",{staticClass:"text-success"},[t._v("\n                              套用優惠券\n                            ")]):t._e()]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+t._s(a.product.unit))]),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(a.final_total))])])}),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",class:{discount:t.data.final_total!==t.data.total},attrs:{colspan:"3"}},[t._v("總計")]),e("td",{staticClass:"text-right",class:{discount:t.data.final_total!==t.data.total}},[t._v(t._s(t.data.total))])]),t.data.final_total!==t.data.total?e("tr",[e("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),e("td",{staticClass:"text-right text-success"},[t._v(t._s(t.data.final_total))])]):t._e()])])]),e("div",{staticClass:"input-group input-group-sm"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.coupons,expression:"coupons",modifiers:{trim:!0}}],staticClass:"form-control p-2",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupons},on:{input:function(a){a.target.composing||(t.coupons=a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(a){return t.UseCoupons()}}},[t._v("\n                          套用優惠碼\n                        ")])])])]),t.couponsath?e("div",{staticClass:"text-danger mb-3"},[t._v("優惠碼輸入錯誤")]):t._e()])]):t._e(),e("div",{staticClass:"col-lg-8 p-lg-5 pay"},[e("CostomForm")],1)])])])]):e("div",{staticClass:"text-center h3 d-flex align-items-center justify-content-center",staticStyle:{height:"500px"}},[e("div",{staticClass:"d-flex align-items-center flex-column"},[e("span",[t._v("沒有選購任何商品"+t._s(t.time)+"秒後跳回商品頁...")]),e("span",[t._v("\n          沒有回應時請點\n          "),e("router-link",{attrs:{to:"/products"}},[t._v("商品頁")])],1)])])]),t.hide?e("div",{staticClass:"m-pos"},[e("div",{staticClass:"d-xl-none d-block m-order px-2 py-4",staticStyle:{position:"relative"}},[e("div",{staticClass:"order-im"},[e("div",[e("span",{staticClass:"font-title"},[t._v("商品名稱 :")]),e("br"),e("div",{attrs:{id:"table"}},[e("table",{staticClass:"table"},[t._m(2),e("tbody",t._l(t.data.carts,function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle m-padding"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button",disabled:t.isdisabled===a.id},on:{click:function(e){return t.removeCart(a.id)}}},[e("i",{staticClass:"far fa-trash-alt"})])]),e("td",{staticClass:"align-middle m-padding"},[t._v("\n                      "+t._s(a.product.title)+"\n                      "),a.coupon?e("div",{staticClass:"text-success"},[t._v("\n                        套用優惠券\n                      ")]):t._e()]),e("td",{staticClass:"align-middle m-padding"},[t._v(t._s(a.qty)+t._s(a.product.unit))]),e("td",{staticClass:"align-middle m-padding text-right"},[t._v(t._s(a.final_total))])])}),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-right m-padding",class:{discount:t.data.final_total!==t.data.total},attrs:{colspan:"3"}},[t._v("總計")]),e("td",{staticClass:"text-right m-padding",class:{discount:t.data.final_total!==t.data.total}},[t._v(t._s(t.data.total))])]),t.data.final_total!==t.data.total?e("tr",[e("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),e("td",{staticClass:"text-right text-success"},[t._v(t._s(t.data.final_total))])]):t._e()])])]),e("div",{staticClass:"input-group mb-3 input-group-sm"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupons,expression:"coupons"}],staticClass:"form-control p-2",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupons},on:{input:function(a){a.target.composing||(t.coupons=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(a){return t.UseCoupons()}}},[t._v("\n                  套用優惠碼\n                ")])])]),t.couponsath?e("span",{staticClass:"text-danger"},[t._v("優惠碼輸入錯誤")]):t._e()])]),e("a",{staticClass:"order-btn",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.ordershow()}}},[t._v("商品資訊")])])]):t._e()])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"mt-3"},[e("div",{staticClass:"container mb-3"},[e("h1",{staticClass:"text-center"},[t._v("結帳頁")]),e("div",{staticClass:"form-row text-center d-lg-flex d-none"},[e("div",{staticClass:"col-sm col-12"},[e("div",{staticClass:"alert alert-primary alert-border",attrs:{role:"alert"}},[t._v("\n                1.輸入訂單資料\n              ")])]),e("div",{staticClass:"col-sm col-12"},[e("div",{staticClass:"alert alert-light alert-border",attrs:{role:"alert"}},[t._v("\n                2.金流付款\n              ")])]),e("div",{staticClass:"col-sm col-12"},[e("div",{staticClass:"alert alert-light alert-border",attrs:{role:"alert"}},[t._v("\n                3.完成\n              ")])])]),e("div",{staticClass:"d-flex box-out text-center d-lg-none"},[e("div",{staticClass:"item d-flex flex-column align-items-center"},[e("div",{staticClass:"box box-conduct"},[t._v("\n                1\n              ")]),e("span",[t._v("輸入訂單資料")])]),e("div",{staticClass:"item d-flex flex-column align-items-center"},[e("div",{staticClass:"box"},[t._v("\n                2\n              ")]),e("span",[t._v("金流付款")])]),e("div",{staticClass:"item d-flex flex-column align-items-center"},[e("div",{staticClass:"box"},[t._v("\n                3\n              ")]),e("span",[t._v("完成")])])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("th"),e("th",[t._v("品名")]),e("th",[t._v("數量")]),e("th",[t._v("單價")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("th",{staticClass:"m-padding"}),e("th",{staticClass:"m-padding",attrs:{width:"75"}},[t._v("品名")]),e("th",{staticClass:"m-padding"},[t._v("數量")]),e("th",{staticClass:"m-padding"},[t._v("單價")])])}],r=(e("8e6e"),e("ac6a"),e("456d"),e("a481"),e("bd86")),n=e("1157"),o=e.n(n),l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("form",{staticClass:"my-4",on:{submit:function(a){return a.preventDefault(),t.submitPage()}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useremail"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),t.errors.has("email")?e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),t.errors.has("name")?e("span",{staticClass:"text-danger"},[t._v("輸入姓名不得為空")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("phone")},attrs:{type:"tel",id:"usertel",name:"phone",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),t.errors.has("phone")?e("span",{staticClass:"text-danger"},[t._v("收件人電話不得為空")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),t.errors.has("address")?e("span",{staticClass:"text-danger"},[t._v("收件人地址不得留空")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"comment"}},[t._v("留言")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})]),t._m(0)])])},c=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-danger"},[t._v("送出訂單")])])}],d={data:function(){return{form:{user:{}}}},methods:{submitPage:function(){var t=this;this.$store.dispatch("updateLoading",!0),this.$store.dispatch("Mcart/getCart").then(function(){if(!0===t.$store.state.Mcart.hide){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("yang","/order");t.$validator.validate().then(function(e){if(e){var s={data:t.form};t.$http.post(a,s).then(function(a){a.data.success&&t.$router.replace("/checkout/".concat(a.data.orderId,"/paytype"))})}t.$store.dispatch("updateLoading",!1)})}})}}},u=d,m=e("2877"),p=Object(m["a"])(u,l,c,!1,null,null,null),v=p.exports,f=e("2f62");function h(t,a){var e=Object.keys(t);return Object.getOwnPropertySymbols&&e.push.apply(e,Object.getOwnPropertySymbols(t)),a&&(e=e.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e}function g(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?h(e,!0).forEach(function(a){Object(r["a"])(t,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):h(e).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})}return t}var _={components:{CostomForm:v},data:function(){return{coupons:"",timeSender:null,hide:!0,couponsath:!1,time:3}},watch:{hide:function(){this.timeout()}},created:function(){this.getCart()},beforeDestroy:function(){clearInterval(this.timeSender)},computed:g({},Object(f["c"])("Mcart",["data","isdisabled"])),methods:{getCart:function(){var t=this;this.$store.dispatch("Mcart/getCart").then(function(){t.hide=t.$store.state.Mcart.hide})},timeout:function(){var t=this;this.time=3;var a=setInterval(function(){t.time-=1,0===t.time&&t.$router.replace("/products")},1e3);this.timeSender=a},removeCart:function(t){var a=this;this.$store.dispatch("Mcart/removeCart",t).then(function(){a.getCart()})},UseCoupons:function(){var t=this;if(""===this.coupons)return this.couponsath=!0,!1;this.$store.dispatch("updateLoading",!0);var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("yang","/coupon"),e={data:{code:this.coupons}};this.$http.post(a,e).then(function(a){if(!a.data.success)return t.couponsath=!0,t.$store.dispatch("updateLoading",!1),!1;t.couponsath=!1,t.getCart(),t.$store.dispatch("updateLoading",!1)})},ordershow:function(){o()(".m-pos").toggleClass("m-pos-show")}}},C=_,b=(e("9930"),Object(m["a"])(C,s,i,!1,null,null,null));a["default"]=b.exports}}]);
//# sourceMappingURL=chunk-38d92a0e.b27b0145.js.map